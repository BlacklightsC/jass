{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "scopeName": "source.jass",
  "name": "jass",
  "patterns": [
    {
      "include": "#jass-comment"
    },
    {
      "include": "#jass-string"
    },
    {
      "include": "#jass-function"
    },
    {
      "include": "#jass-keyword"
    },
    {
      "include": "#jass-const"
    },
    {
      "include": "#jass-keyword-operator"
    },
    {
      "include": "#support.variable"
    },
    {
      "include": "#"
    },
    {
      "include": "#jass-keyword-control"
    },
    {
      "include": "#jass-keyword-control"
    },
    {
      "include": "#jass-type"
    },
    {
      "include": "#jass-class"
    },
    {
      "include": "#jass-number"
    },
    {
      "include": "#jass-variable"
    },
    {
      "include": "#jass-statement"
    },

    {
      "include": "#vjass-other"
    },
    {
      "include": "#vjass-keyword"
    },
    {
      "include": "#vjass-this"
    },
    {
      "include": "#vjass-variable-macro"
    },
    {
      "include": "#vjass-macro"
    }
  ],
  "repository": {
    "jass-comment": {
      "name": "comment.line.double-slash",
      "begin": "//",
      "end": "\\n"
    },
    "jass-string": {
      "name": "string.quoted.double",
      "match": "\"((\\\\\")|.)*?\""
    },
    "jass-function": {
      "name": "support.function",
      "match": "(?<=native)\\s+\\w+\\s+(?=takes)|(?<=function)\\s+\\w+\\s+(?=takes)|(?<=call)\\s+\\w+\\s*(?=\\()|\\w+(?<!if)\\s*(?=\\()|(?<=function)\\s+\\w+"
    },
    "jass-keyword": {
      "name": "keyword",
      "match": "\\b(and|or|not|globals|endglobals|function|endfunction|constant|native|local|type|set|call|takes|returns|extends|array)\\b"
    },
    "jass-const": {
      "name": "constant.language",
      "match": "\\b(true|false|null|nothing)\\b"
    },
    
    "jass-keyword-operator": {
      "name": "keyword.operator",
      "match": ">|<|=|!|\\+|-|\\*|/|%|\\[|\\]|\\(|\\)|,|\\.|\\bmod\\b"
    },
    "jass-keyword-control": {
      "name": "keyword.control",
      "match": "\\b(if|else|elseif|endif|then|loop|endloop|exitwhen|return)\\b"
    },
    "jass-type": {
      "name": "support.type",
      "match": "\\b(integer|real|boolean|string|handle|code)\\b"
    },
    "jass-class": {
      "name": "support.class",
      "match": "\\b(agent|event|player|widget|unit|destructable|item|ability|buff|force|group|trigger|triggercondition|triggeraction|timer|location|region|rect|boolexpr|sound|conditionfunc|filterfunc|unitpool|itempool|race|alliancetype|racepreference|gamestate|igamestate|fgamestate|playerstate|playerscore|playergameresult|unitstate|aidifficulty|eventid|gameevent|playerevent|playerunitevent|unitevent|limitop|widgetevent|dialogevent|unittype|gamespeed|gamedifficulty|gametype|mapflag|mapvisibility|mapsetting|mapdensity|mapcontrol|playerslotstate|volumegroup|camerafield|camerasetup|playercolor|placement|startlocprio|raritycontrol|blendmode|texmapflags|effect|effecttype|weathereffect|terraindeformation|fogstate|fogmodifier|dialog|button|quest|questitem|defeatcondition|timerdialog|leaderboard|multiboard|multiboarditem|trackable|gamecache|version|itemtype|texttag|attacktype|damagetype|weapontype|soundtype|lightning|pathingtype|image|ubersplat|hashtable)\\b"
    },
    "jass-number": {
      "name": "constant.numeric",
      "match": "'[a-zA-Z0-9]{4}'|\\d+\\.\\d+|\\.\\d+|\\d+\\.|0x\\d+|\\b\\d+\\b"
    },
    "jass-variable": {
      "name": "support.variable",
      "match": "[a-zA-Z]\\w*\\s*(?=\\!)|[a-zA-Z]\\w*\\s*(?==)|[a-zA-Z]\\w*\\s*(?=\\+)|[a-zA-Z]\\w*\\s*(?=-)|[a-zA-Z]\\w*\\s*(?=\\*)|[a-zA-Z]\\w*\\s*(?=/)|[a-zA-Z]\\w*\\s*(?=%)|[a-zA-Z]\\w*\\s*(?=>)|[a-zA-Z]\\w*\\s*(?=<)|[a-zA-Z]\\w*\\s*(?=\\[)|[a-zA-Z]\\w*\\s*(?=\\])|[a-zA-Z]\\w*\\s*(?=\\.)|[a-zA-Z]\\w*\\s*(?=,)|[a-zA-Z]\\w*\\s*(?=\\))|(?<=\\!)\\s*[a-zA-Z]\\w*|(?<=\\+)\\s*[a-zA-Z]\\w*|(?<=-)\\s*[a-zA-Z]\\w*|(?<=\\*)\\s*[a-zA-Z]\\w*|(?<=/)\\s*[a-zA-Z]\\w*|(?<=%)\\s*[a-zA-Z]\\w*|(?<=>)\\s*[a-zA-Z]\\w*|(?<=<)\\s*[a-zA-Z]\\w*|(?<=\\[)\\s*[a-zA-Z]\\w*|(?<=\\])\\s*[a-zA-Z]\\w*|(?<=\\()\\s*[a-zA-Z]\\w*|(?<=\\.)\\s*[a-zA-Z]\\w*(?!\\()"
    },
    "jass-statement": {
      "name": "support.variable",
      "match": "(?<=boolean)\\s+(?!extends)[a-zA-Z]\\w*|(?<=integer)\\s+(?!extends)[a-zA-Z]\\w*|(?<=real)\\s+(?!extends)[a-zA-Z]\\w*|(?<=string)\\s+(?!extends)[a-zA-Z]\\w*|(?<=handle)\\s+(?!extends)[a-zA-Z]\\w*|(?<=code)\\s+(?!extends)[a-zA-Z]\\w*|(?<=agent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=event)\\s+(?!extends)[a-zA-Z]\\w*|(?<=player)\\s+(?!extends)[a-zA-Z]\\w*|(?<=widget)\\s+(?!extends)[a-zA-Z]\\w*|(?<=unit)\\s+(?!extends)[a-zA-Z]\\w*|(?<=destructable)\\s+(?!extends)[a-zA-Z]\\w*|(?<=item)\\s+(?!extends)[a-zA-Z]\\w*|(?<=ability)\\s+(?!extends)[a-zA-Z]\\w*|(?<=buff)\\s+(?!extends)[a-zA-Z]\\w*|(?<=force)\\s+(?!extends)[a-zA-Z]\\w*|(?<=group)\\s+(?!extends)[a-zA-Z]\\w*|(?<=trigger)\\s+(?!extends)[a-zA-Z]\\w*|(?<=triggercondition)\\s+(?!extends)[a-zA-Z]\\w*|(?<=triggeraction)\\s+(?!extends)[a-zA-Z]\\w*|(?<=timer)\\s+(?!extends)[a-zA-Z]\\w*|(?<=location)\\s+(?!extends)[a-zA-Z]\\w*|(?<=region)\\s+(?!extends)[a-zA-Z]\\w*|(?<=rect)\\s+(?!extends)[a-zA-Z]\\w*|(?<=boolexpr)\\s+(?!extends)[a-zA-Z]\\w*|(?<=sound)\\s+(?!extends)[a-zA-Z]\\w*|(?<=conditionfunc)\\s+(?!extends)[a-zA-Z]\\w*|(?<=filterfunc)\\s+(?!extends)[a-zA-Z]\\w*|(?<=unitpool)\\s+(?!extends)[a-zA-Z]\\w*|(?<=itempool)\\s+(?!extends)[a-zA-Z]\\w*|(?<=race)\\s+(?!extends)[a-zA-Z]\\w*|(?<=alliancetype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=racepreference)\\s+(?!extends)[a-zA-Z]\\w*|(?<=gamestate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=igamestate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=fgamestate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playerstate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playerscore)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playergameresult)\\s+(?!extends)[a-zA-Z]\\w*|(?<=unitstate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=aidifficulty)\\s+(?!extends)[a-zA-Z]\\w*|(?<=eventid)\\s+(?!extends)[a-zA-Z]\\w*|(?<=gameevent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playerevent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playerunitevent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=unitevent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=limitop)\\s+(?!extends)[a-zA-Z]\\w*|(?<=widgetevent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=dialogevent)\\s+(?!extends)[a-zA-Z]\\w*|(?<=unittype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=gamespeed)\\s+(?!extends)[a-zA-Z]\\w*|(?<=gamedifficulty)\\s+(?!extends)[a-zA-Z]\\w*|(?<=gametype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=mapflag)\\s+(?!extends)[a-zA-Z]\\w*|(?<=mapvisibility)\\s+(?!extends)[a-zA-Z]\\w*|(?<=mapsetting)\\s+(?!extends)[a-zA-Z]\\w*|(?<=mapdensity)\\s+(?!extends)[a-zA-Z]\\w*|(?<=mapcontrol)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playerslotstate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=volumegroup)\\s+(?!extends)[a-zA-Z]\\w*|(?<=camerafield)\\s+(?!extends)[a-zA-Z]\\w*|(?<=camerasetup)\\s+(?!extends)[a-zA-Z]\\w*|(?<=playercolor)\\s+(?!extends)[a-zA-Z]\\w*|(?<=placement)\\s+(?!extends)[a-zA-Z]\\w*|(?<=startlocprio)\\s+(?!extends)[a-zA-Z]\\w*|(?<=raritycontrol)\\s+(?!extends)[a-zA-Z]\\w*|(?<=blendmode)\\s+(?!extends)[a-zA-Z]\\w*|(?<=texmapflags)\\s+(?!extends)[a-zA-Z]\\w*|(?<=effect)\\s+(?!extends)[a-zA-Z]\\w*|(?<=effecttype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=weathereffect)\\s+(?!extends)[a-zA-Z]\\w*|(?<=terraindeformation)\\s+(?!extends)[a-zA-Z]\\w*|(?<=fogstate)\\s+(?!extends)[a-zA-Z]\\w*|(?<=fogmodifier)\\s+(?!extends)[a-zA-Z]\\w*|(?<=dialog)\\s+(?!extends)[a-zA-Z]\\w*|(?<=button)\\s+(?!extends)[a-zA-Z]\\w*|(?<=quest)\\s+(?!extends)[a-zA-Z]\\w*|(?<=questitem)\\s+(?!extends)[a-zA-Z]\\w*|(?<=defeatcondition)\\s+(?!extends)[a-zA-Z]\\w*|(?<=timerdialog)\\s+(?!extends)[a-zA-Z]\\w*|(?<=leaderboard)\\s+(?!extends)[a-zA-Z]\\w*|(?<=multiboard)\\s+(?!extends)[a-zA-Z]\\w*|(?<=multiboarditem)\\s+(?!extends)[a-zA-Z]\\w*|(?<=trackable)\\s+(?!extends)[a-zA-Z]\\w*|(?<=gamecache)\\s+(?!extends)[a-zA-Z]\\w*|(?<=version)\\s+(?!extends)[a-zA-Z]\\w*|(?<=itemtype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=texttag)\\s+(?!extends)[a-zA-Z]\\w*|(?<=attacktype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=damagetype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=weapontype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=soundtype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=lightning)\\s+(?!extends)[a-zA-Z]\\w*|(?<=pathingtype)\\s+(?!extends)[a-zA-Z]\\w*|(?<=image)\\s+(?!extends)[a-zA-Z]\\w*|(?<=ubersplat)\\s+(?!extends)[a-zA-Z]\\w*|(?<=hashtable)\\s+(?!extends)[a-zA-Z]\\w*"  
    },

    "vjass-keyword": {
      "name": "keyword",
      "match": "\\b(library|initializer|needs|requires|optional|endlibrary|scope|endscope|private|public|static|execute|evaluate|create|destroy|interface|endinterface|extends|struct|endstruct|method|endmethod|this|defaults|delegate|operator|module|endmodule|implement|hook|stub|debug)\\b|:"
    },
    "vjass-this": {
      "name": "variable.language",
      "match": "\\bthis\\b|:"
    },
    "vjass-other": {
      "name": "support.other",
      "match": "\\b(execute|evaluate|create|destroy)\\b|:"
    },
    "vjass-variable-macro": {
      "name": "variable.other",
      "match": "\\$\\w*?\\$"
    },
    "vjass-macro": {
      "name": "comment.line.number-sign",
      "match": "#define|#ifndef|#endif|#ifdef|#include"
    }
  }
}